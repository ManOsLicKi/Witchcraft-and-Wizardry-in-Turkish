scoreboard players set @s rareBooks 0
scoreboard players set @s rareBooksMoney 0 

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.AdvancedRuneTranslation.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.AdvancedRuneTranslation.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.AdvancedRuneTranslation.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.AdvancedRuneTranslation.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.MagicalTheory.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.MagicalTheory.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.MagicalTheory.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.MagicalTheory.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.SecretsOfTheDarkestArt.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.SecretsOfTheDarkestArt.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.SecretsOfTheDarkestArt.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.SecretsOfTheDarkestArt.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.LivingWithLegilimens.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.LivingWithLegilimens.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.LivingWithLegilimens.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.LivingWithLegilimens.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.SpellsAndEnchantmentsForTheHumanSpecies.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.SpellsAndEnchantmentsForTheHumanSpecies.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.SpellsAndEnchantmentsForTheHumanSpecies.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.SpellsAndEnchantmentsForTheHumanSpecies.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.1000MagicalHerbsAndFungi.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.1000MagicalHerbsAndFungi.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.1000MagicalHerbsAndFungi.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.1000MagicalHerbsAndFungi.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.MagicalWaterPlantsOfTheMediterranean.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.MagicalWaterPlantsOfTheMediterranean.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.MagicalWaterPlantsOfTheMediterranean.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.MagicalWaterPlantsOfTheMediterranean.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.ArmandoDippetMasterOrMoron.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.ArmandoDippetMasterOrMoron.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.ArmandoDippetMasterOrMoron.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.ArmandoDippetMasterOrMoron.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.TheWitchingHour.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.TheWitchingHour.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.TheWitchingHour.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.TheWitchingHour.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.FromTheEarthToTheMoon.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.FromTheEarthToTheMoon.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.FromTheEarthToTheMoon.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.FromTheEarthToTheMoon.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.MudbloodsAndHowToSpotThem.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.MudbloodsAndHowToSpotThem.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.MudbloodsAndHowToSpotThem.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.MudbloodsAndHowToSpotThem.count" 1

scoreboard players operation @s rareBooks += @s tmp2

execute as @s[scores={playerID=1}] store result score @s tmp2 run data get entity 0-0-5-0-1 ArmorItems[3].tag."invItem.TheFlapOfTheCape.count" 1
execute as @s[scores={playerID=2}] store result score @s tmp2 run data get entity 0-0-5-0-2 ArmorItems[3].tag."invItem.TheFlapOfTheCape.count" 1
execute as @s[scores={playerID=3}] store result score @s tmp2 run data get entity 0-0-5-0-3 ArmorItems[3].tag."invItem.TheFlapOfTheCape.count" 1
execute as @s[scores={playerID=4}] store result score @s tmp2 run data get entity 0-0-5-0-4 ArmorItems[3].tag."invItem.TheFlapOfTheCape.count" 1

scoreboard players operation @s rareBooks += @s tmp2

scoreboard players operation @s rareBooksMoney = @s rareBooks
scoreboard players set @s tmp2 50
scoreboard players operation @s rareBooksMoney *= @s tmp2

# A Bit of light reading injection only if the player has rare books
execute as @s[scores={rareBooks=1,convState=1,conv=14}] run tag @s add use
scoreboard players remove @s[tag=use] questConvOffset 1

execute as @s[tag=use] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset run data merge entity @s {CustomName:"{\"text\":\"±ˈˈ I have a rare book\"}",Tags:["_____Normal_____","_____click_____","convOption","i"]}
execute as @s[tag=qtr] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset if score @s con = @p[tag=activePlayer] selectCurrent as @p[tag=activePlayer] run scoreboard players set @s convState 23
execute as @s[tag=qtr] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset if score @s con = @p[tag=activePlayer] selectCurrent as @p[tag=activePlayer] run scoreboard players set @s questConvOffset 1
tag @s remove use

execute as @s[scores={rareBooks=2..,convState=1,conv=14}] run tag @s add use
scoreboard players remove @s[tag=use] questConvOffset 1

execute as @s[tag=use] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset run data merge entity @s {CustomName:"{\"text\":\"±ˈˈ I have some rare books\"}",Tags:["_____Normal_____","_____click_____","convOption","i"]}
execute as @s[tag=qtr] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset if score @s con = @p[tag=activePlayer] selectCurrent as @p[tag=activePlayer] run scoreboard players set @s convState 23
execute as @s[tag=qtr] as @e[tag=convOption] if score @s con = @p[tag=activePlayer] questConvOffset if score @s con = @p[tag=activePlayer] selectCurrent as @p[tag=activePlayer] run scoreboard players set @s questConvOffset 1
tag @s remove use